{{#*inline "page"}}
<ajax-form>
{{#each posts}}
    <article>
        <header class=article-header><span class="article-header-inner">{{{this.title_html}}}</span></header>
        {{#if this.excerpt_html}}
            <main>{{{this.excerpt_html}}}</main>
        {{/if}}
        <footer>
        submitted by <a href="@{{this.submitted_by_username}}">{{this.submitted_by_username}}</a>
        {{date this.created_at}} and got
        <a href={{this.uuid}}>{{this.comment_count}} comments</a>
        <form class=module-aside action="vote?redirect=2" method=POST>
            {{#if (gte ../user.trust_level 3)}}
                <a href="edit-post?post={{this.uuid}}" class=button>Edit</a>
            {{/if}}
            <button name="{{#if this.starred_by_me}}rm_star{{else}}add_star{{/if}}" value={{this.uuid}} title="{{#if this.starred_by_me}}Remove star{{else}}Add star{{/if}}">
                <span>{{this.score}}</span>
                <img width=12 height=12 src=assets/{{#if this.starred_by_me}}star_active.svg{{else}}star.svg{{/if}} alt="{{#if this.starred_by_me}}Remove star{{else}}Add star{{/if}}">
            </button>
            <!-- flagging is not yet implemented -->
            <button name=add_flag value={{this.uuid}} title="Add flag">
                <img width=12 height=12 src=assets/flag.svg alt="Add flag">
            </button>
        </form>
        </footer>
    </article>
{{/each}}
</ajax-form>
{{/inline}}
{{~> (parent)~}}
